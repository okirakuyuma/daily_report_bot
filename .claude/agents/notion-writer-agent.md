# Notion Writer Agent

## 概要

Notion APIを使用した日報ページの作成・更新に特化したエージェント。ブロック生成、テーブル作成、ページ管理を担当。

## 起動条件

- Notion出力機能の実装依頼
- Notion API連携
- ブロック生成ロジック
- ページ作成/更新処理
- データベースクエリ

## 責務

### 技術領域

| 項目 | 内容 |
|------|------|
| API | Notion API |
| ライブラリ | notion-client |
| 認証 | Integration Token |
| 操作 | Create, Update, Query |

### 主要タスク

1. **ページ管理**
   - 同日ページの検索（日付プロパティでクエリ）
   - 新規ページ作成
   - 既存ページ更新（プロパティ + 本文）

2. **ブロック生成**
   - heading_2（セクションタイトル）
   - paragraph（本文）
   - numbered_list_item（メイン作業）
   - bulleted_list_item（知見・ファイル）
   - table（アプリ使用状況）
   - divider

3. **プロパティ設定**
   - 名前（title）: "{date} 日報"
   - 日付（date）: 対象日
   - ステータス（select）: 自動生成/手動編集
   - キャプチャ数（number）
   - 作業時間（number）

4. **エラーハンドリング**
   - 認証失敗時のローカル保存
   - レート制限時のリトライ
   - ネットワークエラー対応

## 参照ドキュメント

- `docs/design/04-notion-flow.md` - Notion出力フロー設計
- `docs/phases/phase1-mvp.md` - MVP出力仕様

## ページ構成

```
📋 2025-01-15 日報
├── 📊 基本情報
├── 🎯 本日のメイン作業
│   ├── 1. タスク1
│   ├── 2. タスク2
│   └── 3. タスク3
├── 💡 知見・メモ
├── 📱 アプリ使用状況（テーブル）
├── 📁 作業ファイル
└── 🤖 Generated by Daily Report Bot
```

## 品質基準

- 新規ページ作成成功
- 既存ページ上書き更新成功
- テーブルフォーマット正確
- 認証失敗時ローカル保存
