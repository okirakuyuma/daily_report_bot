# Notionå‡ºåŠ›ãƒ•ãƒ­ãƒ¼è¨­è¨ˆ

## 1. æ¦‚è¦

### 1.1 ç›®çš„

LLMè¦ç´„ã§ç”Ÿæˆã•ã‚ŒãŸreport.jsonã‚’Notionãƒšãƒ¼ã‚¸ã¨ã—ã¦å‡ºåŠ›ã—ã€æ—¥å ±ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«è“„ç©ã™ã‚‹ã€‚

### 1.2 å‡ºåŠ›å½¢å¼

| é …ç›® | å†…å®¹ |
|------|------|
| å‡ºåŠ›å…ˆ | Notionãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆæ—¥å ±ç”¨ï¼‰ |
| ãƒšãƒ¼ã‚¸æ§‹æˆ | ã‚¿ã‚¤ãƒˆãƒ« + ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ + æœ¬æ–‡ãƒ–ãƒ­ãƒƒã‚¯ |
| æ›´æ–°æ–¹å¼ | åŒæ—¥ãƒšãƒ¼ã‚¸ã¯æ›´æ–°ã€æ–°è¦æ—¥ã¯ä½œæˆ |

## 2. ãƒ•ãƒ­ãƒ¼è©³ç´°

### 2.1 å‡¦ç†ã‚¹ãƒ†ãƒƒãƒ—

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        START                                  â”‚
â”‚                  (LLMè¦ç´„å®Œäº†å¾Œ)                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. report.json èª­ã¿è¾¼ã¿                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. æ—¢å­˜ãƒšãƒ¼ã‚¸æ¤œç´¢                                             â”‚
â”‚    - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰åŒæ—¥ãƒšãƒ¼ã‚¸ã‚’ã‚¯ã‚¨ãƒª                        â”‚
â”‚    - æ—¥ä»˜ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§ä¸€æ„ç‰¹å®š                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                   â”‚
               å­˜åœ¨ã™ã‚‹              å­˜åœ¨ã—ãªã„
                    â”‚                   â”‚
                    â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3a. ãƒšãƒ¼ã‚¸æ›´æ–°           â”‚  â”‚ 3b. ãƒšãƒ¼ã‚¸æ–°è¦ä½œæˆ       â”‚
â”‚     - ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£æ›´æ–°     â”‚  â”‚     - ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£è¨­å®š     â”‚
â”‚     - æœ¬æ–‡ãƒ–ãƒ­ãƒƒã‚¯ç½®æ›   â”‚  â”‚     - æœ¬æ–‡ãƒ–ãƒ­ãƒƒã‚¯è¿½åŠ    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. Toasté€šçŸ¥                                                  â”‚
â”‚    - æˆåŠŸ: ãƒšãƒ¼ã‚¸URLä»˜ã                                      â”‚
â”‚    - å¤±æ•—: ã‚¨ãƒ©ãƒ¼å†…å®¹                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         END                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Report  â”‚     â”‚ Notion  â”‚     â”‚ Notion  â”‚     â”‚  Toast  â”‚
â”‚ Writer  â”‚     â”‚  API    â”‚     â”‚   DB    â”‚     â”‚ Notifierâ”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚               â”‚               â”‚               â”‚
     â”‚ query(date)   â”‚               â”‚               â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚               â”‚               â”‚
     â”‚               â”‚ search        â”‚               â”‚
     â”‚               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚               â”‚
     â”‚               â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚
     â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ results       â”‚               â”‚
     â”‚               â”‚               â”‚               â”‚
     â”‚ [exists]      â”‚               â”‚               â”‚
     â”‚ update_page() â”‚               â”‚               â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚               â”‚               â”‚
     â”‚               â”‚ update        â”‚               â”‚
     â”‚               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚               â”‚
     â”‚               â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚
     â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ page_url      â”‚               â”‚
     â”‚               â”‚               â”‚               â”‚
     â”‚ [not exists]  â”‚               â”‚               â”‚
     â”‚ create_page() â”‚               â”‚               â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚               â”‚               â”‚
     â”‚               â”‚ insert        â”‚               â”‚
     â”‚               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚               â”‚
     â”‚               â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚
     â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ page_url      â”‚               â”‚
     â”‚               â”‚               â”‚               â”‚
     â”‚ notify(success, url)          â”‚               â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
     â”‚               â”‚               â”‚               â”‚
```

## 3. Notionãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### 3.1 ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£å®šç¾©

| ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£å | å‹ | èª¬æ˜ |
|-------------|-----|------|
| åå‰ (title) | title | "{date} æ—¥å ±" |
| æ—¥ä»˜ | date | å¯¾è±¡æ—¥ |
| ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | select | è‡ªå‹•ç”Ÿæˆ / æ‰‹å‹•ç·¨é›† |
| ã‚­ãƒ£ãƒ—ãƒãƒ£æ•° | number | ç·ã‚­ãƒ£ãƒ—ãƒãƒ£æ•° |
| ä½œæ¥­æ™‚é–“(åˆ†) | number | ç·ä½œæ¥­æ™‚é–“ |
| ãƒ¡ã‚¤ãƒ³ä½œæ¥­ | multi_select | ä¸Šä½3ã‚¿ã‚¹ã‚¯ã®ã‚¿ã‚° |
| ç”Ÿæˆæ—¥æ™‚ | date | ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆæ—¥æ™‚ |

### 3.2 æœ¬æ–‡ãƒ–ãƒ­ãƒƒã‚¯æ§‹æˆ

```
ğŸ“‹ 2025-01-15 æ—¥å ±
â”œâ”€â”€ heading_2: ğŸ“Š åŸºæœ¬æƒ…å ±
â”‚   â””â”€â”€ paragraph: è¨˜éŒ²æœŸé–“ / ã‚­ãƒ£ãƒ—ãƒãƒ£æ•° / ä½œæ¥­æ™‚é–“
â”‚
â”œâ”€â”€ heading_2: ğŸ¯ æœ¬æ—¥ã®ãƒ¡ã‚¤ãƒ³ä½œæ¥­
â”‚   â”œâ”€â”€ numbered_list_item: ã‚¿ã‚¹ã‚¯1
â”‚   â”‚   â””â”€â”€ paragraph: è©³ç´°èª¬æ˜
â”‚   â”œâ”€â”€ numbered_list_item: ã‚¿ã‚¹ã‚¯2
â”‚   â”‚   â””â”€â”€ paragraph: è©³ç´°èª¬æ˜
â”‚   â””â”€â”€ numbered_list_item: ã‚¿ã‚¹ã‚¯3
â”‚       â””â”€â”€ paragraph: è©³ç´°èª¬æ˜
â”‚
â”œâ”€â”€ heading_2: ğŸ’¡ çŸ¥è¦‹ãƒ»ãƒ¡ãƒ¢
â”‚   â”œâ”€â”€ bulleted_list_item: [æŠ€è¡“] çŸ¥è¦‹1
â”‚   â”œâ”€â”€ bulleted_list_item: [ãƒ—ãƒ­ã‚»ã‚¹] çŸ¥è¦‹2
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ heading_2: ğŸ“± ã‚¢ãƒ—ãƒªä½¿ç”¨çŠ¶æ³
â”‚   â””â”€â”€ table: ã‚¢ãƒ—ãƒªå | æ™‚é–“ | é »åº¦ | ä¸»ãªç”¨é€”
â”‚
â”œâ”€â”€ heading_2: ğŸ“ ä½œæ¥­ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â””â”€â”€ bulleted_list_item: ãƒ•ã‚¡ã‚¤ãƒ«åãƒªã‚¹ãƒˆ
â”‚
â””â”€â”€ divider
    â””â”€â”€ paragraph: ğŸ¤– Generated by Daily Report Bot
```

## 4. APIä»•æ§˜

### 4.1 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ã‚¨ãƒª

```python
# åŒæ—¥ãƒšãƒ¼ã‚¸æ¤œç´¢
response = notion.databases.query(
    database_id=DATABASE_ID,
    filter={
        "property": "æ—¥ä»˜",
        "date": {
            "equals": "2025-01-15"
        }
    }
)
```

### 4.2 ãƒšãƒ¼ã‚¸ä½œæˆ

```python
response = notion.pages.create(
    parent={"database_id": DATABASE_ID},
    properties={
        "åå‰": {
            "title": [{"text": {"content": "2025-01-15 æ—¥å ±"}}]
        },
        "æ—¥ä»˜": {
            "date": {"start": "2025-01-15"}
        },
        "ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹": {
            "select": {"name": "è‡ªå‹•ç”Ÿæˆ"}
        },
        "ã‚­ãƒ£ãƒ—ãƒãƒ£æ•°": {
            "number": 240
        },
        "ä½œæ¥­æ™‚é–“(åˆ†)": {
            "number": 478
        }
    },
    children=blocks  # æœ¬æ–‡ãƒ–ãƒ­ãƒƒã‚¯
)
```

### 4.3 ãƒšãƒ¼ã‚¸æ›´æ–°

```python
# ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£æ›´æ–°
notion.pages.update(
    page_id=page_id,
    properties={...}
)

# æœ¬æ–‡ãƒ–ãƒ­ãƒƒã‚¯æ›´æ–°ï¼ˆæ—¢å­˜å‰Šé™¤â†’æ–°è¦è¿½åŠ ï¼‰
# 1. æ—¢å­˜ãƒ–ãƒ­ãƒƒã‚¯å–å¾—
existing_blocks = notion.blocks.children.list(page_id)

# 2. æ—¢å­˜ãƒ–ãƒ­ãƒƒã‚¯å‰Šé™¤
for block in existing_blocks["results"]:
    notion.blocks.delete(block["id"])

# 3. æ–°è¦ãƒ–ãƒ­ãƒƒã‚¯è¿½åŠ 
notion.blocks.children.append(page_id, children=blocks)
```

## 5. ãƒ–ãƒ­ãƒƒã‚¯ç”Ÿæˆ

### 5.1 ãƒ–ãƒ­ãƒƒã‚¯ãƒ“ãƒ«ãƒ€ãƒ¼

```python
def build_report_blocks(report: dict) -> list:
    blocks = []

    # åŸºæœ¬æƒ…å ±
    blocks.append(heading_2("ğŸ“Š åŸºæœ¬æƒ…å ±"))
    blocks.append(paragraph(
        f"è¨˜éŒ²æœŸé–“: {report['meta']['first_capture']} ã€œ {report['meta']['last_capture']}\n"
        f"ã‚­ãƒ£ãƒ—ãƒãƒ£æ•°: {report['meta']['capture_count']}å›\n"
        f"ä½œæ¥­æ™‚é–“: {report['meta']['total_duration_min']}åˆ†"
    ))

    # ãƒ¡ã‚¤ãƒ³ä½œæ¥­
    blocks.append(heading_2("ğŸ¯ æœ¬æ—¥ã®ãƒ¡ã‚¤ãƒ³ä½œæ¥­"))
    for i, task in enumerate(report["main_tasks"], 1):
        blocks.append(numbered_list_item(task["title"]))
        blocks.append(paragraph(task["description"], indent=1))

    # çŸ¥è¦‹ãƒ»ãƒ¡ãƒ¢
    blocks.append(heading_2("ğŸ’¡ çŸ¥è¦‹ãƒ»ãƒ¡ãƒ¢"))
    for insight in report["insights"]:
        blocks.append(bulleted_list_item(
            f"[{insight['category']}] {insight['content']}"
        ))

    # ã‚¢ãƒ—ãƒªä½¿ç”¨çŠ¶æ³
    blocks.append(heading_2("ğŸ“± ã‚¢ãƒ—ãƒªä½¿ç”¨çŠ¶æ³"))
    blocks.append(build_app_table(report["app_usage"]))

    # ä½œæ¥­ãƒ•ã‚¡ã‚¤ãƒ«
    blocks.append(heading_2("ğŸ“ ä½œæ¥­ãƒ•ã‚¡ã‚¤ãƒ«"))
    for file in report["files"]:
        blocks.append(bulleted_list_item(file))

    # ãƒ•ãƒƒã‚¿ãƒ¼
    blocks.append(divider())
    blocks.append(paragraph("ğŸ¤– Generated by Daily Report Bot"))

    return blocks
```

### 5.2 ãƒ–ãƒ­ãƒƒã‚¯ãƒ˜ãƒ«ãƒ‘ãƒ¼

```python
def heading_2(text: str) -> dict:
    return {
        "type": "heading_2",
        "heading_2": {
            "rich_text": [{"type": "text", "text": {"content": text}}]
        }
    }

def paragraph(text: str, indent: int = 0) -> dict:
    block = {
        "type": "paragraph",
        "paragraph": {
            "rich_text": [{"type": "text", "text": {"content": text}}]
        }
    }
    return block

def numbered_list_item(text: str) -> dict:
    return {
        "type": "numbered_list_item",
        "numbered_list_item": {
            "rich_text": [{"type": "text", "text": {"content": text}}]
        }
    }

def bulleted_list_item(text: str) -> dict:
    return {
        "type": "bulleted_list_item",
        "bulleted_list_item": {
            "rich_text": [{"type": "text", "text": {"content": text}}]
        }
    }

def divider() -> dict:
    return {"type": "divider", "divider": {}}
```

### 5.3 ãƒ†ãƒ¼ãƒ–ãƒ«ç”Ÿæˆ

```python
def build_app_table(app_usage: list) -> dict:
    rows = []

    # ãƒ˜ãƒƒãƒ€ãƒ¼è¡Œ
    rows.append({
        "type": "table_row",
        "table_row": {
            "cells": [
                [{"type": "text", "text": {"content": "ã‚¢ãƒ—ãƒª"}}],
                [{"type": "text", "text": {"content": "æ™‚é–“"}}],
                [{"type": "text", "text": {"content": "é »åº¦"}}],
                [{"type": "text", "text": {"content": "ä¸»ãªç”¨é€”"}}]
            ]
        }
    })

    # ãƒ‡ãƒ¼ã‚¿è¡Œ
    for app in app_usage:
        rows.append({
            "type": "table_row",
            "table_row": {
                "cells": [
                    [{"type": "text", "text": {"content": app["name"]}}],
                    [{"type": "text", "text": {"content": f"{app['duration_min']}åˆ†"}}],
                    [{"type": "text", "text": {"content": rank_to_emoji(app["rank"])}}],
                    [{"type": "text", "text": {"content": app.get("purpose", "-")}}]
                ]
            }
        })

    return {
        "type": "table",
        "table": {
            "table_width": 4,
            "has_column_header": True,
            "has_row_header": False,
            "children": rows
        }
    }

def rank_to_emoji(rank: str) -> str:
    return {"high": "ğŸ”´ å¤š", "medium": "ğŸŸ¡ ä¸­", "low": "ğŸŸ¢ å°‘"}.get(rank, "-")
```

## 6. Toasté€šçŸ¥

### 6.1 æˆåŠŸé€šçŸ¥

```python
from win10toast_click import ToastNotifier

def notify_success(page_url: str, date: str, capture_count: int):
    toaster = ToastNotifier()
    toaster.show_toast(
        title="âœ… æ—¥å ±å‡ºåŠ›å®Œäº†",
        msg=f"{date} / {capture_count}å›ã‚­ãƒ£ãƒ—ãƒãƒ£",
        duration=5,
        callback_on_click=lambda: webbrowser.open(page_url)
    )
```

### 6.2 å¤±æ•—é€šçŸ¥

```python
def notify_failure(error: str, log_path: str):
    toaster = ToastNotifier()
    toaster.show_toast(
        title="âŒ æ—¥å ±å‡ºåŠ›å¤±æ•—",
        msg=error[:50],
        duration=10,
        callback_on_click=lambda: os.startfile(log_path)
    )
```

## 7. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

| ã‚¨ãƒ©ãƒ¼ | å¯¾å¿œ |
|--------|------|
| Notionèªè¨¼å¤±æ•— | Toasté€šçŸ¥ã€ãƒ­ãƒ¼ã‚«ãƒ«ä¿å­˜ |
| ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹IDä¸æ­£ | ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã€è¨­å®šç¢ºèªä¿ƒã— |
| API ãƒ¬ãƒ¼ãƒˆåˆ¶é™ | 1åˆ†å¾…æ©Ÿå¾Œãƒªãƒˆãƒ©ã‚¤ |
| ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ | 3å›ãƒªãƒˆãƒ©ã‚¤ã€å¤±æ•—ã§ãƒ­ãƒ¼ã‚«ãƒ«ä¿å­˜ |
| ãƒ–ãƒ­ãƒƒã‚¯ç”Ÿæˆã‚¨ãƒ©ãƒ¼ | ç°¡æ˜“ç‰ˆã§å†è©¦è¡Œ |

### 7.1 ãƒ­ãƒ¼ã‚«ãƒ«ä¿å­˜ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯

```python
def save_locally(report: dict, page_html: str):
    """Notionå‡ºåŠ›å¤±æ•—æ™‚ã«ãƒ­ãƒ¼ã‚«ãƒ«ã«HTMLä¿å­˜"""
    path = f"reports/{report['meta']['date']}.html"
    with open(path, "w", encoding="utf-8") as f:
        f.write(page_html)
    return path
```

## 8. è¨­å®šãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿

```json
{
  "notion": {
    "integration_token": "${NOTION_TOKEN}",
    "database_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",
    "page_title_format": "{date} æ—¥å ±",
    "retry_count": 3,
    "retry_delay_sec": 5,
    "save_locally_on_failure": true
  },
  "toast": {
    "enabled": true,
    "duration_success": 5,
    "duration_failure": 10,
    "open_page_on_click": true
  }
}
```

## 9. ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

### 9.1 Notion Integrationä½œæˆ

1. https://www.notion.so/my-integrations ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ã€Œ+ New integrationã€ã‚’ã‚¯ãƒªãƒƒã‚¯
3. åå‰: "Daily Report Bot"
4. Capabilities: Read content, Update content, Insert content
5. ã€ŒSubmitã€ã—ã¦Integration Tokenã‚’ã‚³ãƒ”ãƒ¼

### 9.2 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å…±æœ‰

1. æ—¥å ±ç”¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆ
2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒšãƒ¼ã‚¸å³ä¸Šã€Œ...ã€â†’ã€Œæ¥ç¶šã€â†’ã€ŒDaily Report Botã€ã‚’é¸æŠ
3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹IDã‚’URLã‹ã‚‰å–å¾—
   - URL: `https://notion.so/xxxxx?v=yyyy`
   - Database ID: `xxxxx`

### 9.3 ç’°å¢ƒå¤‰æ•°è¨­å®š

```bash
# Windows
setx NOTION_TOKEN "secret_xxxxx"
setx NOTION_DATABASE_ID "xxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"

# ã¾ãŸã¯ .env ãƒ•ã‚¡ã‚¤ãƒ«
NOTION_TOKEN=secret_xxxxx
NOTION_DATABASE_ID=xxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
```

## 10. ãƒ†ã‚¹ãƒˆè¦³ç‚¹

### 10.1 å˜ä½“ãƒ†ã‚¹ãƒˆ

- [ ] ãƒ–ãƒ­ãƒƒã‚¯ç”ŸæˆãŒæ­£ã—ã„å½¢å¼
- [ ] ãƒ†ãƒ¼ãƒ–ãƒ«ç”ŸæˆãŒæ­£ã—ã„
- [ ] ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£å¤‰æ›ãŒæ­£ç¢º

### 10.2 çµ±åˆãƒ†ã‚¹ãƒˆ

- [ ] æ–°è¦ãƒšãƒ¼ã‚¸ä½œæˆæˆåŠŸ
- [ ] æ—¢å­˜ãƒšãƒ¼ã‚¸æ›´æ–°æˆåŠŸ
- [ ] Toasté€šçŸ¥è¡¨ç¤º

### 10.3 ç•°å¸¸ç³»ãƒ†ã‚¹ãƒˆ

- [ ] èªè¨¼å¤±æ•—æ™‚ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
- [ ] ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ–­æ™‚ã®å‹•ä½œ
- [ ] ä¸æ­£ãªreport.jsonå…¥åŠ›
